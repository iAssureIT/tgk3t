{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/react/tgk3t/webapp/field/src/coreAdmin/systemSecurity/Login.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom'; // import {browserHistory} from 'react-router-dom';\n\nimport { Redirect } from 'react-router';\nimport swal from 'sweetalert';\nimport $ from \"jquery\";\nimport 'font-awesome/css/font-awesome.min.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './SignUp.css';\nimport axios from 'axios';\n\nclass Login extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loggedIn: false,\n      auth: {\n        email: '',\n        pwd: ''\n      }\n    };\n  }\n\n  componentDidMount() {\n    axios.defaults.headers.common['Authorization'] = 'Bearer ' + localStorage.getItem(\"token\");\n  }\n\n  userlogin(event) {\n    event.preventDefault();\n    console.log(\"in login mode\", this.state.auth);\n    var auth = {\n      email: this.refs.loginusername.value,\n      password: this.refs.loginpassword.value\n    };\n    console.log(\"auth value\", auth);\n    axios.post('/api/users/post/login', auth).then(response => {\n      console.log(\"-------userData------>>\", response); // this.setState({\n      //   token : response.data.token\n      // });\n\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + response.data.token;\n      localStorage.setItem(\"token\", response.data.token);\n      localStorage.setItem(\"user_ID\", response.data.user_ID);\n      localStorage.setItem(\"userRole\", response.data.roles[0]); // localStorage.setItem(\"admin_ID\",response.data.user_ID);\n      // localStorage.setItem(\"admin_email\",response.data.email);\n      // localStorage.setItem(\"admin_fullName\",response.data.fullName);\n\n      console.log(\"localStorage =\", localStorage); // browserHistory.replace('/');\n      // if(axios.defaults.headers.common.Authorization)\n      //   {\n\n      this.props.history.push(\"/dashboard\");\n      window.location.reload(); // direct.setState({loggedIn:response.data.token})\n\n      if (localStorage == null) {\n        swal(\"Invalid Email or Password\", \"Please Enter valid email and password\", \"warning\");\n      } else {\n        this.setState({\n          loggedIn: true\n        });\n      } // }\n\n    }).catch(error => {\n      console.log(\"error = \", error);\n\n      if (localStorage !== null) {\n        swal(\"Invalid Email or Password\", \"Please Enter valid email and password\", \"warning\");\n      }\n\n      if (error.message === \"Request failed with status code 401\") {\n        swal(\"Your session is expired! Please login again.\", \"\", \"error\");\n        this.props.history.push(\"/login\");\n      }\n    });\n  }\n\n  showSignPass() {\n    $('.showPwd').toggleClass('showPwd1');\n    $('.hidePwd').toggleClass('hidePwd1');\n    return $('.inputTextPass').attr('type', 'text');\n  }\n\n  hideSignPass() {\n    $('.showPwd').toggleClass('showPwd1');\n    $('.hidePwd').toggleClass('hidePwd1');\n    return $('.inputTextPass').attr('type', 'password');\n  }\n\n  render() {\n    // var winHeight = window.innerHeight;\n    // var divHeight = winHeight/4.5+'px';\n    //   console.log(\"-------------------------------\",this.state.loggedIn)\n    if (this.state.loggedIn === true) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      });\n    }\n\n    var windowWidth = $(window).width(); // console.log('ww',windowWidth);\n\n    if (windowWidth >= 320 && windowWidth <= 992) {\n      var backImage = \"visible-xs col-xs-12 visible-sm col-sm-12 noBackImage\";\n    } else {\n      var backImage = \"signUpBackground hidden-xs hidden-sm\";\n    }\n\n    var winHeight = window.innerHeight;\n    var divHeight = 490 + 'px';\n    console.log(\"-------------------------------\", this.state.loggedIn);\n    return React.createElement(\"div\", {\n      className: backImage,\n      style: {\n        \"height\": winHeight\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 signUpWrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-4 col-lg-offset-7 col-md-4 col-md-offset-7 col-sm-12 signupPadding signUpFormWrap \",\n      style: {\n        \"height\": divHeight\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"divLoginInWrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-4 col-lg-offset-4 marbtm10 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"/images/logo.png\",\n      height: \"70px\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    })), React.createElement(\"form\", {\n      id: \"login\",\n      onSubmit: this.userlogin.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-lg-4 col-lg-offset-4 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"signInNameTitle \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"bordbt\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"SIGN IN\"))), React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"inputContent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"blocking-span noIb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"email\",\n      className: \"col-lg-12 col-md-1col-lg-12 col-md-12 col-sm-12 oesSignUpForm tmsLoginTextBox\",\n      onChange: this.handleChange,\n      ref: \"loginusername\",\n      id: \"loginusername\",\n      name: \"loginusername\",\n      placeholder: \"\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"floating-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-envelope signupIconFont\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), \"Email ID\")))), React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 marBtm30\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group form-group1 fltlft input-group col-lg-12 col-md-12 col-sm-12 inputContent \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"blocking-span noIb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control border3 pass oesSignUpForm confirmbtm inputTextPass tmsLoginTextBox\",\n      ref: \"loginpassword\",\n      name: \"loginpassword\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"floating-label1 lbfloatpass\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-lock\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }), \" Password\")), React.createElement(\"div\", {\n      className: \"showHideSignDiv\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-eye showPwd showEyeupSign\",\n      \"aria-hidden\": \"true\",\n      onClick: this.showSignPass.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"fa fa-eye-slash hidePwd hideEyeSignup \",\n      \"aria-hidden\": \"true\",\n      onClick: this.hideSignPass.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    })), React.createElement(\"span\", {\n      className: \"focus-border\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"logInBtn\",\n      type: \"submit\",\n      className: \"col-lg-12 col-md-12 col-xs-12 col-sm-12 UMloginbutton hvr-sweep-to-right\",\n      value: \"Login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 col-sm-12 col-xs-12 pdcls\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/iassureit/react/tgk3t/webapp/field/src/coreAdmin/systemSecurity/Login.js"],"names":["React","Component","Link","Redirect","swal","$","axios","Login","constructor","state","loggedIn","auth","email","pwd","componentDidMount","defaults","headers","common","localStorage","getItem","userlogin","event","preventDefault","console","log","refs","loginusername","value","password","loginpassword","post","then","response","data","token","setItem","user_ID","roles","props","history","push","window","location","reload","setState","catch","error","message","showSignPass","toggleClass","attr","hideSignPass","render","windowWidth","width","backImage","winHeight","innerHeight","divHeight","bind","handleChange"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link} from 'react-router-dom';\n// import {browserHistory} from 'react-router-dom';\nimport { Redirect } from 'react-router';\nimport swal from 'sweetalert';\nimport $ from \"jquery\";\n\nimport 'font-awesome/css/font-awesome.min.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './SignUp.css';\n\nimport axios from 'axios';\n\n\nclass Login extends Component {\n\n  constructor(){\n      super();\n        this.state = {           \n          loggedIn : false,\n          auth: {\n                email           : '',\n                pwd             : '',\n            }\n        }\n  }\n  componentDidMount(){\n      axios.defaults.headers.common['Authorization'] = 'Bearer '+ localStorage.getItem(\"token\");\n  }\n  userlogin(event){\n    event.preventDefault();\n    console.log(\"in login mode\",this.state.auth);\n        var auth= {\n          email       : this.refs.loginusername.value,\n          password    : this.refs.loginpassword.value,\n        }\n\n        console.log(\"auth value\",auth);\n\n    axios\n      .post('/api/users/post/login',auth)\n      .then((response)=> {\n        console.log(\"-------userData------>>\",response);\n        // this.setState({\n        //   token : response.data.token\n        // });\n        axios.defaults.headers.common['Authorization'] = 'Bearer '+response.data.token;\n        localStorage.setItem(\"token\",response.data.token);\n        localStorage.setItem(\"user_ID\",response.data.user_ID);\n        localStorage.setItem(\"userRole\",(response.data.roles)[0]);\n        \n        // localStorage.setItem(\"admin_ID\",response.data.user_ID);\n        // localStorage.setItem(\"admin_email\",response.data.email);\n        // localStorage.setItem(\"admin_fullName\",response.data.fullName);\n\n        console.log(\"localStorage =\",localStorage);\n        // browserHistory.replace('/');\n        // if(axios.defaults.headers.common.Authorization)\n        //   {\n            this.props.history.push(\"/dashboard\");\n            window.location.reload();\n            // direct.setState({loggedIn:response.data.token})\n            if(localStorage==null){\n              swal(\"Invalid Email or Password\",\"Please Enter valid email and password\",\"warning\");\n            }else{\n              this.setState({\n                  loggedIn  :   true\n              })\n            }\n          // }\n      })\n      .catch((error)=>{\n                        console.log(\"error = \",error);\n                        if(localStorage!==null){\n                          swal(\"Invalid Email or Password\",\"Please Enter valid email and password\",\"warning\");\n                        }\n                        if(error.message === \"Request failed with status code 401\")\n                        {\n                             swal(\"Your session is expired! Please login again.\",\"\", \"error\");\n                             this.props.history.push(\"/login\");\n                        }\n              });\n  }\n  showSignPass(){\n      $('.showPwd').toggleClass('showPwd1');\n      $('.hidePwd').toggleClass('hidePwd1');\n      return $('.inputTextPass').attr('type', 'text');\n  }\n  hideSignPass(){\n      $('.showPwd').toggleClass('showPwd1');\n      $('.hidePwd').toggleClass('hidePwd1');\n      return $('.inputTextPass').attr('type', 'password');\n  }\n  render(){\n    // var winHeight = window.innerHeight;\n    // var divHeight = winHeight/4.5+'px';\n    //   console.log(\"-------------------------------\",this.state.loggedIn)\n    \n    if(this.state.loggedIn===true){\n      return <div></div>\n    }\n\n    var windowWidth = $(window).width();\n    // console.log('ww',windowWidth);\n      if(windowWidth>=320&&windowWidth<=992){\n        var backImage = \"visible-xs col-xs-12 visible-sm col-sm-12 noBackImage\"\n        }else{\n        var backImage = \"signUpBackground hidden-xs hidden-sm\"\n      }\n\n\n    var winHeight = window.innerHeight;\n    var divHeight = 490 +'px';\n      console.log(\"-------------------------------\",this.state.loggedIn)\n    \n   \n\n\n\n    return(\n      <div className={backImage} style={{\"height\": winHeight}}> \n{/*     <button className=\"btn btn-primary\" onClick={this.openModal.bind(this)}>Open Modal</button>\n*/}     \n\n      <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 signUpWrapper\">\n        <div className=\"col-lg-4 col-lg-offset-7 col-md-4 col-md-offset-7 col-sm-12 signupPadding signUpFormWrap \" style={{\"height\": divHeight}}>\n          <div className=\"divLoginInWrap\">\n\n            <div className=\"col-lg-4 col-lg-offset-4 marbtm10 \">\n              <img src=\"/images/logo.png\" height=\"70px\"/>\n              </div>\n\n            <form id=\"login\" onSubmit={this.userlogin.bind(this)}>\n              <br/>\n              <div className=\"col-lg-4 col-lg-offset-4 \">\n             {/* <h3> hhhh</h3>*/}\n              {<h4 className=\"signInNameTitle \"><span className=\"bordbt\">SIGN IN</span></h4>\n              }</div>\n              <div className=\"col-lg-12 col-md-12 col-sm-12 \">\n                <div className=\"inputContent\">\n                  <span className=\"blocking-span noIb\">\n                    <input type=\"email\" className=\"col-lg-12 col-md-1col-lg-12 col-md-12 col-sm-12 oesSignUpForm tmsLoginTextBox\" onChange={this.handleChange} ref=\"loginusername\" id=\"loginusername\" name=\"loginusername\" placeholder=\"\" required/>\n                    <span className=\"floating-label\"><i className=\"fa fa-envelope signupIconFont\" aria-hidden=\"true\"/>Email ID</span>   \n                  </span>\n                </div>\n              </div>\n              <div className=\"col-lg-12 col-md-12 col-sm-12 marBtm30\">\n                <div className=\"form-group form-group1 fltlft input-group col-lg-12 col-md-12 col-sm-12 inputContent \">     \n                  <span className=\"blocking-span noIb\">\n                    <input type=\"password\" className=\"form-control border3 pass oesSignUpForm confirmbtm inputTextPass tmsLoginTextBox\" ref=\"loginpassword\" name=\"loginpassword\" required/>\n                    <span className=\"floating-label1 lbfloatpass\"><i className=\"fa fa-lock\" aria-hidden=\"true\"></i> Password</span>                 \n                  </span>\n               \n                <div className=\"showHideSignDiv\">\n                  <i className=\"fa fa-eye showPwd showEyeupSign\" aria-hidden=\"true\" onClick={this.showSignPass.bind(this)}></i>\n                  <i className=\"fa fa-eye-slash hidePwd hideEyeSignup \" aria-hidden=\"true\" onClick={this.hideSignPass.bind(this)}></i>\n                </div> \n                  <span className=\"focus-border\">\n                    <i></i>\n                  </span>\n                </div>\n              </div>\n              <div className=\"col-lg-12 col-md-12 col-sm-12\">\n                <input id=\"logInBtn\" type=\"submit\" className=\"col-lg-12 col-md-12 col-xs-12 col-sm-12 UMloginbutton hvr-sweep-to-right\" value=\"Login\"/>\n              </div>\n              <div className=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 pdcls\">\n               { /*<div className=\"col-lg-6 col-md-6 col-sm-6 \">\n                  <Link to='/signup' className=\"UMGreyy UMGreyy_l UMcreateacc col-lg-12 col-md-12 col-xs-12 col-sm-12\"> Sign Up</Link>\n                </div>*/}\n                {/*<div className=\"col-lg-6 col-md-6 col-sm-6 offset-lg-1 customFl\">\n                  <Link to='/forgot-pwd' className=\"UMGreyy UMGreyy_l UMcreateacc col-lg-12 col-md-12 col-xs-12 col-sm-12\">\n                    Forgot Password?\n                  </Link>\n                </div>*/}\n              </div>\n              {/*<div className=\"col-lg-12 col-md-12 col-sm-12 pdcls\">\n                <div className=\"col-lg-12 col-md-12 col-sm-12 \">\n                  <Link to='/verify-account' className=\"UMGreyy UMGreyy_l forgotpass emailverify col-lg-12 col-md-12 col-xs-12 col-sm-12\">\n                    OTP Verification\n                  </Link>\n                </div>\n              </div>*/}\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n    );\n  }\n}\nexport default Login;"]},"metadata":{},"sourceType":"module"}