{"ast":null,"code":"var _jsxFileName = \"/home/iassureit/react/tgk3t/webapp/field/src/fieldAgent/operations/Properties/Properties.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport $ from 'jquery';\nimport Progressbar from '../progressBar/Progressbar.js';\nimport { Router, withRouter } from 'react-router-dom';\nimport moment from 'moment';\nimport swal from 'sweetalert';\nimport '../progressBar/Progressbar.css';\nimport './Properties.css';\n\nclass Properties extends Component {\n  constructor(props) {\n    super(props); // console.log(\"1 = \", props);\n\n    this.state = {\n      propertiesData: [],\n      userData: []\n    };\n  }\n\n  componentDidMount() {\n    $(\".selectall\").click(function () {\n      $(\".individual\").prop(\"checked\", $(this).prop(\"checked\"));\n    });\n    var formValues = {\n      /*user_id :\"5d3ec084e7381f059964f5be\",*/\n      // status\t:\"assignedTo\" ,\n      status: \"VerifyPending\"\n    };\n    var userId = localStorage.getItem('user_ID');\n    var role = localStorage.getItem('userRole');\n    axios.defaults.headers.common['Authorization'] = 'Bearer ' + localStorage.getItem(\"token\"); // console.log(\"formValues\",formValues);\n\n    axios.get('/api/fieldagent/get/type/allocatedToFieldAgent/' + userId + '/' + formValues.status).then(res => {\n      console.log(res);\n      const postsdata = res.data;\n      this.setState({\n        propertiesData: postsdata\n      });\n      console.log(\"PropertyDetails++++++++field++++++++++\", postsdata);\n    }).catch();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps && nextProps.status) {\n      var userId = localStorage.getItem('user_ID');\n      var role = localStorage.getItem('userRole');\n      var formValues = {\n        // user_id :\"5d3ec084e7381f059964f5be\",\n        status: nextProps.status ? nextProps.status : \"VerifyPending\"\n      };\n      console.log(\"formValues......\", formValues);\n\n      if (formValues === \"New\") {\n        // var URL =\"/api/interestedProperties/get/transactionDetails/\"\n        var URL = '/api/interestedProperties/get/transactionDetails/' + userId + '/' + formValues.status;\n        console.log(\"interestedProperties\");\n      } else {\n        // var URL =\"/api/fieldagent/get/type/allocatedToFieldAgent/\"\n        var URL = '/api/fieldagent/get/type/allocatedToFieldAgent/' + userId + '/' + formValues.status;\n      }\n\n      axios.defaults.headers.common['Authorization'] = 'Bearer ' + localStorage.getItem(\"token\");\n      axios.get(URL, formValues).then(res => {\n        console.log(res);\n        const postsdata = res.data;\n        this.setState({\n          propertiesData: postsdata\n        });\n        console.log(\"fields  Details++++++++++++++++++\", postsdata);\n      }).catch();\n    } // ======================2 try==============\n    // var userId =localStorage.getItem('user_ID');\n    //   if(nextProps && nextProps.status){\n    //     \tvar formValues = {\n    // \t// user_id :\"5d3ec084e7381f059964f5be\",\n    // \tstatus\t:nextProps.status ? nextProps.status : \"VerifyPending\" ,\n    // }\n    // var role =localStorage.getItem('userRole');\n    // var method;\n    // console.log(\"role====\",role);\n    // if(role==\"admin\"){\n    // \tvar URL = '/api/salesagent/post/displaylist';\n    // }else if(role==\"field Agent\"){\n    // \tvar URL = '/api/fieldagent/get/type/allocatedToFieldAgent/'+userId+'/'+(formValues.status);\t\t\t\n    // }\n    //    axios\n    //    .get(URL,formValues)\n    //    .then(\n    //      (res)=>{\n    //        console.log(res);\n    //        const postsdata = res.data;\n    //        this.setState({\n    //          propertiesData : postsdata,\n    //        },()=>{\n    //        });\n    //    console.log(\"PropertyDetails receive++++++++++++++++++\",postsdata); \n    //      }\n    //    )\n    //    .catch();\n    //   }\n\n  }\n\n  profileView(event) {\n    event.preventDefault();\n    var id = event.currentTarget.id;\n    console.log(\"_id\", id);\n    this.props.history.push('/profile/' + id);\n  }\n\n  handleDelete(event) {\n    event.preventDefault();\n    var userId = localStorage.getItem('user_ID');\n    var cancelId = event.currentTarget.id;\n    swal({\n      title: \"Are you sure?\",\n      text: \"Once deleted, you will not be able to recover this Property!\",\n      icon: \"warning\",\n      buttons: ['No, cancel it!', 'Yes, I am sure!']\n    }).then(option => {\n      if (option) {\n        var formValues = {\n          property_id: cancelId,\n          status: \"Deleted\",\n          user_id: userId,\n          // allocatedToUserId : \"\",\n          remark: \"\"\n        };\n        console.log(\"formValues\", formValues);\n        axios.patch('/api/salesagent/patch/approvedlist', formValues).then(res => {\n          console.log(res);\n\n          if (res.status == 200) {\n            swal(\" Property Deleted Successfully!\", \"success\");\n            window.location.reload();\n          }\n\n          this.props.getTotalTabCount();\n        }).catch();\n      } else {\n        swal(\"Your Property is safe!\");\n      }\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, this.props.status), this.state.propertiesData.length > 0 ? this.state.propertiesData.map((property, index) => {\n      return React.createElement(\"div\", {\n        key: index,\n        id: property._id,\n        className: \"propertyBox\",\n        onClick: this.profileView.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-lg-1 check1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"checkbox\",\n        id: \"cbtest\",\n        className: \"check individual\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"cbtest\",\n        className: \"check-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-lg-11 pBoxSize\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-lg-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"mt-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, \"Property ID:\", React.createElement(Link, {\n        to: \"/propertyDetails\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, \" \", property.propertyCode), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }), property.propertyType ? property.propertyType : \"Residential Property\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, property.propertyDetails && property.propertyDetails.length > 0 ? property.propertyDetails.map((data, index) => {\n        return React.createElement(\"span\", {\n          key: \"index\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207\n          },\n          __self: this\n        }, data.bedrooms, \"\\xA0 BHK Flat on Rent\");\n      }) : \"2 BHK\"))), React.createElement(\"div\", {\n        className: \"col-lg-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"mt-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, property.ownerDetails.userName ? property.ownerDetails.userName : \"Rushikesh \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }), property.ownerDetails.emailId ? property.ownerDetails.emailId : \"rushikesh.salunkhe101@gmail.com\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }), property.ownerDetails.mobileNumber ? property.ownerDetails.mobileNumber : \"*** **** *** \")), React.createElement(\"div\", {\n        className: \"col-lg-3 pull-right fSize13\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, this.props.status === \"WIP\" ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, moment(property.createdAt).format('MMMM Do YYYY'), \" \\xA0\", moment(property.createdAt).format('LT'), \" \\xA0\") : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, moment(property.propertyCreatedAt).format('MMMM Do YYYY'), \" \\xA0\", moment(property.propertyCreatedAt).format('LT'), \" \\xA0\"), React.createElement(\"div\", {\n        id: \"myProgress\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(Progressbar, {\n        data: \"80\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }))), React.createElement(\"img\", {\n        src: \"/images/cancel.png\",\n        className: \"cancelImg\",\n        id: property._id,\n        onClick: this.handleDelete.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      })));\n    }) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"Under construction\")));\n  }\n\n}\n\nexport default withRouter(Properties);","map":{"version":3,"sources":["/home/iassureit/react/tgk3t/webapp/field/src/fieldAgent/operations/Properties/Properties.js"],"names":["React","Component","axios","Link","$","Progressbar","Router","withRouter","moment","swal","Properties","constructor","props","state","propertiesData","userData","componentDidMount","click","prop","formValues","status","userId","localStorage","getItem","role","defaults","headers","common","get","then","res","console","log","postsdata","data","setState","catch","componentWillReceiveProps","nextProps","URL","profileView","event","preventDefault","id","currentTarget","history","push","handleDelete","cancelId","title","text","icon","buttons","option","property_id","user_id","remark","patch","window","location","reload","getTotalTabCount","render","length","map","property","index","_id","bind","propertyCode","propertyType","propertyDetails","bedrooms","ownerDetails","userName","emailId","mobileNumber","createdAt","format","propertyCreatedAt"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAiC,OAAjC;AACA,SAASC,IAAT,QAAiC,kBAAjC;AACA,OAAOC,CAAP,MAAiC,QAAjC;AACA,OAAOC,WAAP,MAAiC,+BAAjC;AACA,SAAQC,MAAR,EAAgBC,UAAhB,QAAiC,kBAAjC;AACA,OAAOC,MAAP,MAAiC,QAAjC;AACA,OAAOC,IAAP,MAAiC,YAAjC;AACA,OAAO,gCAAP;AACA,OAAO,kBAAP;;AAEC,MAAMC,UAAN,SAAyBT,SAAzB,CAAmC;AACnCU,EAAAA,WAAW,CAACC,KAAD,EAAO;AACjB,UAAMA,KAAN,EADiB,CAEjB;;AACA,SAAKC,KAAL,GAAa;AACZC,MAAAA,cAAc,EAAE,EADJ;AAEZC,MAAAA,QAAQ,EAAQ;AAFJ,KAAb;AAIA;;AACDC,EAAAA,iBAAiB,GAAE;AAElBZ,IAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBa,KAAhB,CAAsB,YAAU;AAChCb,MAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBc,IAAjB,CAAsB,SAAtB,EAAgCd,CAAC,CAAC,IAAD,CAAD,CAAQc,IAAR,CAAa,SAAb,CAAhC;AACC,KAFD;AAGA,QAAIC,UAAU,GAAG;AAChB;AACA;AACAC,MAAAA,MAAM,EAAE;AAHQ,KAAjB;AAMA,QAAIC,MAAM,GAAEC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAZ;AACA,QAAIC,IAAI,GAAEF,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAV;AAEArB,IAAAA,KAAK,CAACuB,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD,YAAWL,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA5D,CAdkB,CAelB;;AACGrB,IAAAA,KAAK,CACJ0B,GADD,CACK,oDAAmDP,MAAnD,GAA4D,GAA5D,GAAgEF,UAAU,CAACC,MADhF,EAECS,IAFD,CAGGC,GAAD,IAAO;AACLC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,YAAMG,SAAS,GAAGH,GAAG,CAACI,IAAtB;AACA,WAAKC,QAAL,CAAc;AACZrB,QAAAA,cAAc,EAAGmB;AADL,OAAd;AAGJF,MAAAA,OAAO,CAACC,GAAR,CAAY,wCAAZ,EAAqDC,SAArD;AACG,KAVH,EAYCG,KAZD;AAaH;;AAECC,EAAAA,yBAAyB,CAACC,SAAD,EAAW;AACnC,QAAGA,SAAS,IAAIA,SAAS,CAAClB,MAA1B,EAAiC;AAChC,UAAIC,MAAM,GAAEC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAZ;AACH,UAAIC,IAAI,GAAEF,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAV;AACK,UAAIJ,UAAU,GAAG;AACrB;AACAC,QAAAA,MAAM,EAAEkB,SAAS,CAAClB,MAAV,GAAmBkB,SAAS,CAAClB,MAA7B,GAAsC;AAFzB,OAAjB;AAKLW,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAA+Bb,UAA/B;;AAEA,UAAGA,UAAU,KAAG,KAAhB,EAAsB;AAErB;AACA,YAAIoB,GAAG,GAAG,sDAAoDlB,MAApD,GAA2D,GAA3D,GAAgEF,UAAU,CAACC,MAArF;AACAW,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACA,OALD,MAMI;AACH;AACA,YAAIO,GAAG,GAAG,oDAAkDlB,MAAlD,GAAyD,GAAzD,GAA8DF,UAAU,CAACC,MAAnF;AAEA;;AACDlB,MAAAA,KAAK,CAACuB,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD,YAAWL,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA5D;AACGrB,MAAAA,KAAK,CACL0B,GADA,CACIW,GADJ,EACQpB,UADR,EAECU,IAFD,CAGGC,GAAD,IAAO;AACLC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,cAAMG,SAAS,GAAGH,GAAG,CAACI,IAAtB;AACA,aAAKC,QAAL,CAAc;AACZrB,UAAAA,cAAc,EAAGmB;AADL,SAAd;AAGJF,QAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ,EAAgDC,SAAhD;AACG,OAVH,EAYCG,KAZD;AAaA,KApCkC,CAsCvC;AAEE;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;;AAEC;;AAEFI,EAAAA,WAAW,CAACC,KAAD,EAAO;AACjBA,IAAAA,KAAK,CAACC,cAAN;AACA,QAAIC,EAAE,GAAGF,KAAK,CAACG,aAAN,CAAoBD,EAA7B;AACAZ,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAkBW,EAAlB;AACA,SAAK/B,KAAL,CAAWiC,OAAX,CAAmBC,IAAnB,CAAwB,cAAaH,EAArC;AACA;;AACDI,EAAAA,YAAY,CAACN,KAAD,EAAO;AAClBA,IAAAA,KAAK,CAACC,cAAN;AACA,QAAIrB,MAAM,GAAEC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAZ;AACA,QAAIyB,QAAQ,GAAGP,KAAK,CAACG,aAAN,CAAoBD,EAAnC;AAEElC,IAAAA,IAAI,CAAC;AACEwC,MAAAA,KAAK,EAAE,eADT;AAEEC,MAAAA,IAAI,EAAE,8DAFR;AAGEC,MAAAA,IAAI,EAAE,SAHR;AAICC,MAAAA,OAAO,EAAE,CACP,gBADO,EAEP,iBAFO;AAJV,KAAD,CAAJ,CAQOvB,IARP,CAQawB,MAAD,IAAW;AACjB,UAAGA,MAAH,EAAU;AACjB,YAAIlC,UAAU,GAAE;AAChBmC,UAAAA,WAAW,EAAMN,QADD;AAEhB5B,UAAAA,MAAM,EAAQ,SAFE;AAGhBmC,UAAAA,OAAO,EAAOlC,MAHE;AAIhB;AACAmC,UAAAA,MAAM,EAAQ;AALE,SAAhB;AAQAzB,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAyBb,UAAzB;AACAjB,QAAAA,KAAK,CACAuD,KADL,CACW,oCADX,EACgDtC,UADhD,EAEKU,IAFL,CAGOC,GAAD,IAAO;AACLC,UAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;;AACA,cAAGA,GAAG,CAACV,MAAJ,IAAc,GAAjB,EACA;AACAX,YAAAA,IAAI,CAAE,iCAAF,EAAqC,SAArC,CAAJ;AACHiD,YAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AAEK;;AACF,eAAKhD,KAAL,CAAWiD,gBAAX;AACD,SAZP,EAcKzB,KAdL;AAeE,OAzBK,MA0BD;AACO3B,QAAAA,IAAI,CAAC,wBAAD,CAAJ;AACD;AACT,KAtCF;AAwCF;;AACDqD,EAAAA,MAAM,GAAG;AACR,WACC;AAAK,MAAA,SAAS,EAAC,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK,KAAKlD,KAAL,CAAWQ,MAAhB,CADD,EAGE,KAAKP,KAAL,CAAWC,cAAX,CAA0BiD,MAA1B,GAAiC,CAAjC,GACC,KAAKlD,KAAL,CAAWC,cAAX,CAA0BkD,GAA1B,CAA8B,CAACC,QAAD,EAAUC,KAAV,KAAkB;AAC/C,aACC;AAAK,QAAA,GAAG,EAAEA,KAAV;AAAiB,QAAA,EAAE,EAAED,QAAQ,CAACE,GAA9B;AAAmC,QAAA,SAAS,EAAC,aAA7C;AAA2D,QAAA,OAAO,EAAE,KAAK3B,WAAL,CAAiB4B,IAAjB,CAAsB,IAAtB,CAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAO,QAAA,IAAI,EAAC,UAAZ;AAAuB,QAAA,EAAE,EAAC,QAA1B;AAAoC,QAAA,SAAS,EAAC,kBAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI;AAAO,QAAA,OAAO,EAAC,QAAf;AAAwB,QAAA,SAAS,EAAC,WAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CADD,EAKC;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAM,QAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAEO,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC,kBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA8BH,QAAQ,CAACI,YAAvC,CAFP,EAEkE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFlE,EAGEJ,QAAQ,CAACK,YAAT,GAAwBL,QAAQ,CAACK,YAAjC,GAAgD,sBAHlD,EAGyE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHzE,EAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAML,QAAQ,CAACM,eAAT,IAA2BN,QAAQ,CAACM,eAAT,CAAyBR,MAAzB,GAAiC,CAA5D,GACLE,QAAQ,CAACM,eAAT,CAAyBP,GAAzB,CAA6B,CAAC9B,IAAD,EAAMgC,KAAN,KAAc;AAC3C,eACE;AAAM,UAAA,GAAG,EAAC,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAmBhC,IAAI,CAACsC,QAAxB,0BADF;AAGC,OAJD,CADK,GAON,OAPA,CAJD,CADD,CADD,EAiBC;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAM,QAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACEP,QAAQ,CAACQ,YAAT,CAAsBC,QAAtB,GAAgCT,QAAQ,CAACQ,YAAT,CAAsBC,QAAtD,GAAgE,YADlE,EACgF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADhF,EAEET,QAAQ,CAACQ,YAAT,CAAsBE,OAAtB,GAAgCV,QAAQ,CAACQ,YAAT,CAAsBE,OAAtD,GAAgE,iCAFlE,EAEoG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFpG,EAGEV,QAAQ,CAACQ,YAAT,CAAsBG,YAAtB,GAAqCX,QAAQ,CAACQ,YAAT,CAAsBG,YAA3D,GAA0E,eAH5E,CADD,CAjBD,EAyBC;AAAK,QAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEE,KAAKhE,KAAL,CAAWQ,MAAX,KAAqB,KAArB,GACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACEZ,MAAM,CAACyD,QAAQ,CAACY,SAAV,CAAN,CAA2BC,MAA3B,CAAkC,cAAlC,CADF,WAEEtE,MAAM,CAACyD,QAAQ,CAACY,SAAV,CAAN,CAA2BC,MAA3B,CAAkC,IAAlC,CAFF,UADA,GAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACEtE,MAAM,CAACyD,QAAQ,CAACc,iBAAV,CAAN,CAAmCD,MAAnC,CAA0C,cAA1C,CADF,WAEEtE,MAAM,CAACyD,QAAQ,CAACc,iBAAV,CAAN,CAAmCD,MAAnC,CAA0C,IAA1C,CAFF,UARF,EAaC;AAAK,QAAA,EAAE,EAAC,YAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,WAAD;AAAa,QAAA,IAAI,EAAC,IAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,CAbD,CAzBD,EA0CC;AAAK,QAAA,GAAG,EAAC,oBAAT;AAA8B,QAAA,SAAS,EAAC,WAAxC;AAAqD,QAAA,EAAE,EAAEb,QAAQ,CAACE,GAAlE;AAAuE,QAAA,OAAO,EAAE,KAAKpB,YAAL,CAAkBqB,IAAlB,CAAuB,IAAvB,CAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA1CD,CALD,CADD;AAoDC,KArDF,CADD,GA0DA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADD,CA7DF,CADD;AAqEA;;AAnPkC;;AAqPpC,eAAe7D,UAAU,CAACG,UAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\nimport axios                from 'axios';\nimport { Link }             from 'react-router-dom';\nimport $                    from 'jquery';\nimport Progressbar          from '../progressBar/Progressbar.js';\nimport {Router, withRouter} from 'react-router-dom';\nimport moment               from 'moment';\nimport swal                 from 'sweetalert';\nimport '../progressBar/Progressbar.css';\nimport './Properties.css';\n\n class Properties extends Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\t// console.log(\"1 = \", props);\n\t\tthis.state = {\n\t\t\tpropertiesData :[],\n\t\t\tuserData       :[],\n\t\t}\n\t}\n\tcomponentDidMount(){\n\n\t\t$(\".selectall\").click(function(){\n\t\t$(\".individual\").prop(\"checked\",$(this).prop(\"checked\"));\n\t\t});\n\t\tvar formValues = {\n\t\t\t/*user_id :\"5d3ec084e7381f059964f5be\",*/\n\t\t\t// status\t:\"assignedTo\" ,\n\t\t\tstatus\t:\"VerifyPending\" ,\n\t\t}\n\n\t\tvar userId =localStorage.getItem('user_ID');\n\t\tvar role =localStorage.getItem('userRole');\n\n\t\taxios.defaults.headers.common['Authorization'] = 'Bearer '+ localStorage.getItem(\"token\");\n\t\t// console.log(\"formValues\",formValues);\n\t    axios\n\t    .get('/api/fieldagent/get/type/allocatedToFieldAgent/'+ userId + '/'+formValues.status)\n\t    .then(\n\t      (res)=>{\n\t        console.log(res);\n\t        const postsdata = res.data;\n\t        this.setState({\n\t          propertiesData : postsdata,\n\t        });\n\t    console.log(\"PropertyDetails++++++++field++++++++++\",postsdata);   \n\t      }\n\t    )\n\t    .catch();\n\t}\n\n   componentWillReceiveProps(nextProps){\t\n    if(nextProps && nextProps.status){\n    \tvar userId =localStorage.getItem('user_ID');\n\t\tvar role =localStorage.getItem('userRole');\n      \tvar formValues = {\n\t\t\t// user_id :\"5d3ec084e7381f059964f5be\",\n\t\t\tstatus\t:nextProps.status ? nextProps.status : \"VerifyPending\" ,\n\t\t}\n\n\t\tconsole.log(\"formValues......\",formValues)\n\n\t\tif(formValues===\"New\"){\n\n\t\t\t// var URL =\"/api/interestedProperties/get/transactionDetails/\"\n\t\t\tvar URL = '/api/interestedProperties/get/transactionDetails/'+userId+'/'+(formValues.status);\t\t\t\n\t\t\tconsole.log(\"interestedProperties\")\n\t\t}\n\t\telse{\n\t\t\t// var URL =\"/api/fieldagent/get/type/allocatedToFieldAgent/\"\n\t\t\tvar URL = '/api/fieldagent/get/type/allocatedToFieldAgent/'+userId+'/'+(formValues.status);\t\t\t\n\n\t\t}\n\t\taxios.defaults.headers.common['Authorization'] = 'Bearer '+ localStorage.getItem(\"token\");\n\t    axios\n\t   .get(URL,formValues)\n\t    .then(\n\t      (res)=>{\n\t        console.log(res);\n\t        const postsdata = res.data;\n\t        this.setState({\n\t          propertiesData : postsdata,\n\t        });\n\t    console.log(\"fields  Details++++++++++++++++++\",postsdata);   \n\t      }\n\t    )\n\t    .catch();\n    }\n\n// ======================2 try==============\n\n\t\t// var userId =localStorage.getItem('user_ID');\n   \t\n  //   if(nextProps && nextProps.status){\n  //     \tvar formValues = {\n\t\t// \t// user_id :\"5d3ec084e7381f059964f5be\",\n\t\t// \tstatus\t:nextProps.status ? nextProps.status : \"VerifyPending\" ,\n\t\t// }\n\t\t// var role =localStorage.getItem('userRole');\n\t\t// var method;\n\t\t// console.log(\"role====\",role);\n\n\t\t// if(role==\"admin\"){\n\t\t// \tvar URL = '/api/salesagent/post/displaylist';\n\t\t\t\t\t\t\n\t\t// }else if(role==\"field Agent\"){\n\t\t// \tvar URL = '/api/fieldagent/get/type/allocatedToFieldAgent/'+userId+'/'+(formValues.status);\t\t\t\n\t\t\t\n\t\t// }\n\t //    axios\n\t //    .get(URL,formValues)\n\n\t //    .then(\n\t //      (res)=>{\n\t //        console.log(res);\n\t //        const postsdata = res.data;\n\t       \n\n\t //        this.setState({\n\t //          propertiesData : postsdata,\n\t //        },()=>{\n\t        \t\n\t //        });\n\t //    console.log(\"PropertyDetails receive++++++++++++++++++\",postsdata); \n\n\t //      }\n\t //    )\n\t //    .catch();\n  //   }\n  \n  }\n\n\tprofileView(event){\n\t\tevent.preventDefault()\n\t\tvar id = event.currentTarget.id;\n\t\tconsole.log(\"_id\",id);\n\t\tthis.props.history.push('/profile/'+ id);\n\t}\n\thandleDelete(event){\n\t\tevent.preventDefault()\n\t\tvar userId =localStorage.getItem('user_ID');\n\t\tvar cancelId = event.currentTarget.id\n\t\t\n  \t\tswal({\n           title: \"Are you sure?\",\n           text: \"Once deleted, you will not be able to recover this Property!\",\n           icon: \"warning\",\n          buttons: [\n            'No, cancel it!',\n            'Yes, I am sure!'\n        ],\n        }).then((option)=> {\n          if(option){\n\t\t\tvar formValues ={\n\t\t\tproperty_id \t  : cancelId,\n\t\t\tstatus \t\t\t  : \"Deleted\",\n\t\t\tuser_id\t\t\t  : userId,\n\t\t\t// allocatedToUserId : \"\",\n\t\t\tremark \t\t\t  : \"\"\n\n\t\t\t}\n\t\t\tconsole.log(\"formValues\",formValues);\n\t\t\taxios\n\t\t\t    .patch('/api/salesagent/patch/approvedlist',formValues)\n\t\t\t    .then(\n\t\t\t      (res)=>{\n\t\t\t        console.log(res);\n\t\t\t        if(res.status == 200)\n\t\t\t        {\n\t\t\t        swal( \" Property Deleted Successfully!\", \"success\")\n\t\t\t   \t\twindow.location.reload();\n\t\t\t        \n\t\t\t         }\n\t\t\t        this.props.getTotalTabCount();\n\t\t\t      }\n\t\t\t    )\n\t\t\t    .catch();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t              swal(\"Your Property is safe!\");\n\t\t            }\n\t\t\t\t });\n\t\t\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"\">\n\t\t\t\t<h1>{this.props.status}</h1>\n\t\t\t\t{\n\t\t\t\t\tthis.state.propertiesData.length>0?\n\t\t\t\t\t\tthis.state.propertiesData.map((property,index)=>{\n\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t<div key={index} id={property._id} className=\"propertyBox\" onClick={this.profileView.bind(this)}>\n\t\t\t\t\t\t\t\t\t<div className=\"col-lg-1 check1\">\n\t\t\t\t\t\t\t\t\t    <input type=\"checkbox\" id=\"cbtest\"  className=\"check individual\"/>\n\t\t\t\t\t\t\t\t\t    <label htmlFor=\"cbtest\" className=\"check-box\"></label> \n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"col-lg-11 pBoxSize\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-lg-4\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"mt-8\">\n\t\t\t\t\t\t\t\t\t\t\t\tProperty ID: \n\t\t\t\t\t\t\t\t\t\t        <Link to=\"/propertyDetails\"> {property.propertyCode}</Link><br/>\n\t\t\t\t\t\t\t\t\t\t\t\t{property.propertyType ? property.propertyType : \"Residential Property\"}<br/>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>{property.propertyDetails&& property.propertyDetails.length >0 ?\n\t\t\t\t\t\t\t\t\t\t\t\t\tproperty.propertyDetails.map((data,index)=>{\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span key=\"index\">{data.bedrooms}&nbsp; BHK Flat on Rent</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\"2 BHK\"\n\t\t\t\t\t\t\t\t\t\t\t\t}</div>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-lg-5\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"mt-8\">\n\t\t\t\t\t\t\t\t\t\t\t\t{property.ownerDetails.userName? property.ownerDetails.userName: \"Rushikesh \" }<br/>\n\t\t\t\t\t\t\t\t\t\t\t\t{property.ownerDetails.emailId ? property.ownerDetails.emailId : \"rushikesh.salunkhe101@gmail.com\"}<br/>\n\t\t\t\t\t\t\t\t\t\t\t\t{property.ownerDetails.mobileNumber ? property.ownerDetails.mobileNumber : \"*** **** *** \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-lg-3 pull-right fSize13\">\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tthis.props.status ===\"WIP\" ?\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{moment(property.createdAt).format('MMMM Do YYYY')} &nbsp;\n\t\t\t\t\t\t\t\t\t\t\t\t\t{moment(property.createdAt).format('LT')} &nbsp;\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{moment(property.propertyCreatedAt).format('MMMM Do YYYY')} &nbsp;\n\t\t\t\t\t\t\t\t\t\t\t\t\t{moment(property.propertyCreatedAt).format('LT')} &nbsp;\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t<div id=\"myProgress\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Progressbar data=\"80\" />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<img src=\"/images/cancel.png\" className=\"cancelImg\"  id={property._id} onClick={this.handleDelete.bind(this)}/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t:\n\t\t\t\t\t\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h5>Under construction</h5>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t</div>\n\t\t)\n\t}\n}\nexport default withRouter(Properties);"]},"metadata":{},"sourceType":"module"}